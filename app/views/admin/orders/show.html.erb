<div class="container">
    <div class="row">
        <div class="col-lg-12 col-md-10 col-sm-8">
            <h4>注文履歴詳細</h4>
            <table class="table">
            <tr><th scope="col">購入者</th><td><%= link_to admin_orders_path do %>
            <%= @order.member.last_name %><%= @order.member.first_name %>
            <% end %>
            </td></tr>
            <tr><th scope="col">注文日</th><td><%= @order.created_at %></td></tr>
            <tr><th scope="col">配送先</th><td>
            <%= @order.shipping_post_code %>
            <%= @order.shipping_address %>
            <%= @order.shipping_name %>
            </td></tr>
            <tr><th scope="col">注文ステータス</th><td>
            <%= form_with model:@order, url: admin_order_path, method: :patch do |f| %>
            <%= f.select :status, Order.statuses.keys %>
            <!--f.select:statusは、@orderの中のstatusカラムを持ってきている, Order.statuses.keysはorderモデルにあるenum。これはこのような記述方法と覚えるしかない。-->
            <%= f.submit '更新'  ,class: "btn btn-primary" %>
            <% end %>
            </td></tr>
            </table>
        </div>
        <div class="col-lg-12 col-md-10 col-sm-8">
            <table>
                <tr>
                    <th>商品名</th>
                    <th>単価(税込)</th>
                    <th>入個数</th>
                    <th>小計</th>
                    <th>制作ステータス</th>
                    <th></th>
                    </tr>
                    <%= @order_items.each do |order_item|%>
                    <tr>
                    <td>
                    <%= order_item.name %>
                    </td>
                    <td>
                    <%= order_item.price %>
                    </td>
                    <td>
                    <%= order_item.item.quantity %>
                    </td>
                    <td>
                    <%= order_item.item.price*ordered_items.quantity %>
                    </td>
                    <td>
                    <%= form_with model:@order_item, url: admin_ordered_item_path(@order_item), method: :patch do |f| %>
                    <%= f.select :making_status, Ordered_item.making_statuses.keys %>
                    <%= f.submit '更新'  ,class: "btn btn-primary" %>
                    <% end %>
                    </td>
                </tr>
                <%end%>
            </table>
        </div>
        
    <!--    <div class="col-lg-12 col-md-10 col-sm-8">-->
    <!--    <table>-->
    <!--    <tr>-->
    <!--    <th>商品合計</th>-->
    <!--    <td><= @order.items.price*ordered_items.quantity></td>-->
    <!--    </tr>-->
    <!--    <tr>-->
    <!--    <th>送料</th>-->
    <!--    <td>800円</td></td>-->
    <!--    </tr>-->
    <!--    <tr>-->
    <!--    <th>請求金額合計</th>-->
    <!--    <td><= @order.item.price*ordered_items.quantity*1.08+800*1.08 ></td>-->
    <!--    </tr>-->
    <!--    </div>-->
    <!--    </table>-->
    <!--</div>-->
</div>
